传统大语言模型依赖预训练知识生成回答，RAG 则在回答时从外部知识源实时检索相关信息，融入生成过程，弥补模型知识局限，提升回答准确性与时效性。

# 1 RAG应用流程

![[Pasted image 20250411200834.png|625]]

- **文档处理阶段**
1. 读取本地文档：流程从“本地文档”开始，通过“读取”操作，将存储在本地的各类文档（如PDF、TXT等）转化为计算机可处理的“文本”形式 。
2. 文本分割：利用特定算法或工具对读取后的“文本”进行“文本分割”，把长文本拆分成一个个较小的“文本块” 。这样做便于后续处理，也能精准匹配用户查询。
3. 文本嵌入：对“文本块”执行“文本嵌入”操作，借助嵌入模型将文本块转化为对应的向量形式，并存储到“向量存储”中 。向量形式能在数学空间中表征文本语义，方便计算文本间相似度。

- **查询处理阶段**
1. 查询文本嵌入：用户输入的“查询文本”，经“文本嵌入”处理转化为“嵌入向量” ，与文档处理时的原理一致，将查询文本也映射到向量空间。
2. 向量相似度计算：将“嵌入向量”与“向量存储”中的文本向量进行“向量相似度计算” ，运用余弦相似度、欧氏距离等算法，找出与查询向量相似度高的“相似文本块” 。

- **答案生成阶段**
1. 提示词构建：基于找到的“相似文本块”，构建“提示词” 。提示词通常会整合相似文本块中的关键信息，并按照大语言模型能理解的格式组织，引导模型生成合适答案。
2. 大模型生成回答：将构建好的“提示词”输入大语言模型，通过“大模型生成”操作，模型依据自身知识和提示词要求生成最终的“回答”反馈给用户 。


